<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${book.title}">–î–µ—Ç–∞–π–ª–∏ –∑–∞ –∫–Ω–∏–≥–∞</title>

    <!-- CSS –∑–∞ —Ç–∞–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
    <link rel="stylesheet" th:href="@{/book-details.css}">
</head>
<body>
<header class="top-bar">
    <div class="container">
        <a th:href="@{/books}" class="back-link">‚Üê –ù–∞–∑–∞–¥ –∫—ä–º –∫–Ω–∏–≥–∏—Ç–µ</a>
        <h1 class="app-title">Book Library</h1>
    </div>
</header>

<main class="container">

    <!-- –ö–∞—Ä—Ç–∏—á–∫–∞ —Å –æ—Å–Ω–æ–≤–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –∫–Ω–∏–≥–∞—Ç–∞ -->
    <section class="book-card">
        <div class="book-card-content">
            <h2 class="book-title" th:text="${book.title}">–ó–∞–≥–ª–∞–≤–∏–µ</h2>
            <p class="book-author">
                –ê–≤—Ç–æ—Ä:
                <span th:text="${book.author}">–ê–≤—Ç–æ—Ä</span>
            </p>
            <p class="book-type">
                –¢–∏–ø:
                <span th:text="${book.type}">TYPE</span>
            </p>
            <p class="book-description" th:text="${book.description}">
                –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∫–Ω–∏–≥–∞—Ç–∞‚Ä¶
            </p>
        </div>
    </section>

    <div class="layout">
        <!-- –†–µ–≤—é—Ç–∞ -->
        <section class="reviews">
            <h3>–†–µ–≤—é—Ç–∞</h3>

            <div th:if="${#lists.isEmpty(reviews)}" class="no-reviews">
                –í—Å–µ –æ—â–µ –Ω—è–º–∞ —Ä–µ–≤—é—Ç–∞ –∑–∞ —Ç–∞–∑–∏ –∫–Ω–∏–≥–∞. –ë—ä–¥–∏ –ø—ä—Ä–≤–∏—è—Ç, –∫–æ–π—Ç–æ —â–µ –Ω–∞–ø–∏—à–µ! üìö
            </div>

            <div th:each="rev : ${reviews}" class="review-card">
                <div class="review-header">
                    <span class="review-user" th:text="${rev.username}">User</span>
                    <span class="review-rating">
                        <span th:each="i : ${#numbers.sequence(1, rev.rating)}">‚òÖ</span>
                        <span th:each="i : ${#numbers.sequence(rev.rating + 1, 5)}"
                              class="star-empty">‚òÖ</span>
                    </span>
                </div>
                <p class="review-comment" th:text="${rev.comment}">
                    –ú–Ω–æ–≥–æ –∑–∞–≤–ª–∞–¥—è–≤–∞—â–∞ –∫–Ω–∏–≥–∞!!!
                </p>
            </div>
        </section>

        <!-- –§–æ—Ä–º–∞ –∑–∞ –Ω–æ–≤–æ —Ä–µ–≤—é -->
        <section class="review-form-section">
            <h3>–î–æ–±–∞–≤–∏ —Ä–µ–≤—é</h3>

            <form th:action="@{'/books/' + ${book.ISBN} + '/reviews'}"
                  th:object="${newReview}"
                  method="post"
                  class="review-form">

                <div class="form-group">
                    <label for="rating">–û—Ü–µ–Ω–∫–∞ (1‚Äì5)</label>
                    <input id="rating" type="number" min="1" max="5" th:field="*{rating}">
                </div>

                <div class="form-group">
                    <label for="comment">–ö–æ–º–µ–Ω—Ç–∞—Ä</label>
                    <textarea id="comment" rows="4" th:field="*{comment}"
                              placeholder="–°–ø–æ–¥–µ–ª–∏ –∫–∞–∫–≤–æ —Ç–∏ —Ö–∞—Ä–µ—Å–∞ (–∏–ª–∏ –Ω–µ —Ç–∏ —Ö–∞—Ä–µ—Å–∞) –≤ –∫–Ω–∏–≥–∞—Ç–∞..."></textarea>
                </div>

                <button type="submit" class="btn-primary">–ò–∑–ø—Ä–∞—Ç–∏ —Ä–µ–≤—é</button>
            </form>
        </section>
    </div>
</main>

<footer class="footer">
    <div class="container">
        <span>¬© 2025 Book Library</span>
    </div>
</footer>
</body>
</html>

