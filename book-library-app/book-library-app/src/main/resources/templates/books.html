<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title>Book Library - –ö–Ω–∏–≥–∏</title>
  <link rel="stylesheet" th:href="@{/books.css}">
</head>
<body>
<header>
  <h1>üìö Book Library</h1>
  <nav>
    <a th:href="@{/index}">–ù–∞—á–∞–ª–æ</a>
    <a th:href="@{/books}" class="active">–ö–Ω–∏–≥–∏</a>
    <a th:href="@{/favourites}">–õ—é–±–∏–º–∏</a>
    <a th:href="@{/login}">–ü—Ä–æ—Ñ–∏–ª</a>

  </nav>
</header>

<main>
  <h2>–°–ø–∏—Å—ä–∫ —Å –∫–Ω–∏–≥–∏</h2>

  <div class="books-container">

    <div class="book-card" th:each="book : ${books}">

      <img th:if="${book.cover != null}"
           th:src="${book.cover}"
           alt="Book cover"
           class="book-cover">

      <img th:if="${book.cover == null}"
           src="https://as2.ftcdn.net/v2/jpg/01/20/73/69/1000_F_120736914_mvc0UMUrgebZ11izrwPjF6HsHdsXnr8P.jpg"
           alt="Book cover"
           class="book-cover">



      <h3 th:text="${book.title}">–ó–∞–≥–ª–∞–≤–∏–µ</h3>
      <p><strong>–ê–≤—Ç–æ—Ä:</strong> <span th:text="${book.author}"></span></p>

      <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> <span th:text="${book.description}"></span></p>

      <p><strong>–î–∞—Ç–∞ –Ω–∞ –ø—É–±–ª–∏–∫—É–≤–∞–Ω–µ: </strong> <span th:text="${#temporals.format(book.publishedOn, 'dd.MM.yyyy')}"></span></p>

      <p><strong>–¢–∏–ø:</strong> <span th:text="${book.type}"></span></p>


      <div sec:authorize="hasRole('ADMIN')">
        <form th:action="@{'/books/delete/' + ${book.ISBN}}" method="post">
          <input type="hidden"
                 th:name="${_csrf.parameterName}"
                 th:value="${_csrf.token}"/>
          <button type="submit">üóë –ò–∑—Ç—Ä–∏–π</button>
        </form>
      </div>


      <form th:action="@{'/favourites/add/' + ${book.ISBN}}" method="post">
        <input type="hidden"
               th:name="${_csrf.parameterName}"
               th:value="${_csrf.token}"/>
        <button type="submit" class="add-book-btn">‚≠ê –î–æ–±–∞–≤–∏ –≤ –ª—é–±–∏–º–∏</button>
      </form>


      <a th:href="@{'/books/edit/' + ${book.ISBN}}" class="add-book-btn">‚ûï –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π –∫–Ω–∏–≥–∞</a>
      <a th:href="@{'/books/' + ${book.ISBN}}" class="add-book-btn">–î–æ–±–∞–≤–∏ –†–µ–≤—é </a>

    </div>
  </div>


  <div style="margin-bottom: 20px;">
    <a class="add-book-btn" th:href="@{/books/add}"> ‚ûï –î–æ–±–∞–≤–∏ –Ω–æ–≤–∞ –∫–Ω–∏–≥–∞</a>
  </div>





</main>

<footer>
  <p>¬© 2025 Book Library. –í—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∞ –∑–∞–ø–∞–∑–µ–Ω–∏.</p>
</footer>
</body>
</html>
